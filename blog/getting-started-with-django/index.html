<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="generator" content="Nanoc 4.2.3">
    <title>
      
        Getting Started with Django - 
      
      Dwayne Crooks
    </title>
    <link rel="stylesheet" href="/stylesheets/all.css">
  </head>
  <body>
    

    <div class="mt2 mx2">
  <header class="center">
    
    <a href="/blog" title="Read more posts">
    
      <img class="circle" alt="A picture of Dwayne" src="https://www.gravatar.com/avatar/8e5e8015f4baa06f4de88e4a9de7a601?s=75">
    </a>
    <p>
      My blog on software development, Python, Django, Ruby, React, Redux and whatnot.
    </p>
  </header>

  <div class="my4 max-width-3 mx-auto">
  <article class="Post">
    <header>
      <h1 class="mb2 fs-large">Getting Started with Django</h1>
      <div class="light-gray"><time datetime="2016-07-25 00:39:08 UTC">July 25th, 2016</time></div>
    </header>
    <div class="Post__body">
      <p><a href="https://www.djangoproject.com/">Django</a> is to <a href="https://www.python.org/">Python</a> as <a href="http://rubyonrails.org/">Rails</a> is to <a href="https://www.ruby-lang.org">Ruby</a>. But, way better and less bloated :). In this post, I will show you how to get started with Django on Ubuntu 14.04 LTS.</p>
<h2>Install Python</h2>
<p>The first thing we'd need to do is install Python. Read <a href="/blog/installing-python-from-source-on-ubuntu">here</a> to find out how to do that.</p>
<h2>Install Django</h2>
<p>Here are the steps you can take when beginning a new Django project, say <code>polls_project</code>.</p>
<pre><code class="language-bash"><span class="gp">$ </span>mkdir polls_project
<span class="gp">$ </span><span class="nb">cd </span>polls_project
<span class="gp">$ </span>~/local/python-3.5.1/bin/pyvenv .env
<span class="gp">$ </span>. .env/bin/activate

<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>pip install -U pip
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>pip install django
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>django-admin startproject polls</code></pre>
<p>Before making anymore changes test that it works and then put everything under <a href="/blog/how-to-install-and-configure-git-on-ubuntu">version control</a>.</p>
<pre><code class="language-bash"><span class="c"># Test that it all works</span>
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span><span class="nb">cd </span>polls
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>python manage.py migrate
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>python manage.py runserver
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>xdg-open http://127.0.0.1:8000/

<span class="c"># Prepare before putting in version control</span>
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span><span class="nb">cd</span> ..
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>pip freeze &gt; requirements.txt
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span><span class="nb">echo</span> -e <span class="s2">".env</span><span class="se">\n</span><span class="s2">__pycache__</span><span class="se">\n</span><span class="s2">*.pyc</span><span class="se">\n</span><span class="s2">db.sqlite3"</span> &gt; .gitignore

<span class="c"># Put it in version control</span>
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>git init
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>git add .
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>git commit -m <span class="s2">"Initial commit"</span></code></pre>
<p>Now that we have the base installation working and tracked let's begin setting up the database.</p>
<h2>Configure PostgreSQL</h2>
<p>Django defaults to <a href="http://www.sqlite.org/">SQLite</a> but eventually we'd want to host the site on <a href="https://www.heroku.com/">Heroku</a> and use <a href="https://www.postgresql.org/">PostgreSQL</a> as the production database. For a <a href="http://12factor.net/dev-prod-parity">variety of reasons</a>, it's not wise to use different databases in different environments. So to avoid future problems let's setup PostgreSQL locally.</p>
<p>I assume you already have PostgreSQL installed. If not, then you can follow the instructions <a href="https://www.postgresql.org/download/linux/ubuntu/">here</a> for your distribution.</p>
<p><strong>Step 1</strong></p>
<p>Install <code>psycopg2</code>. See <a href="http://initd.org/psycopg/docs/install.html#use-a-python-package-manager">here</a> for more details.</p>
<pre><code class="language-bash"><span class="o">(</span>.env<span class="o">)</span> pip install psycopg2</code></pre>
<p><strong>Step 2</strong></p>
<p>Create the database, say <code>polls_development</code>.</p>
<pre><code class="language-bash"><span class="o">(</span>.env<span class="o">)</span> createdb -O <span class="o">[</span>user] polls_development</code></pre>
<p><strong>Step 3</strong></p>
<p>Change the database setting in <code>polls/polls/settings.py</code>.</p>
<pre><code class="language-py"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'default'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'ENGINE'</span><span class="p">:</span> <span class="s">'django.db.backends.postgresql'</span><span class="p">,</span>
        <span class="s">'NAME'</span><span class="p">:</span> <span class="s">'polls_development'</span><span class="p">,</span>
        <span class="s">'USER'</span><span class="p">:</span> <span class="s">'[user]'</span><span class="p">,</span>
        <span class="s">'PASSWORD'</span><span class="p">:</span> <span class="s">'********'</span><span class="p">,</span>
        <span class="s">'HOST'</span><span class="p">:</span> <span class="s">'localhost'</span><span class="p">,</span>
        <span class="s">'PORT'</span><span class="p">:</span> <span class="s">'5432'</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>
<p><strong>Tip:</strong> <em>If you want to connect without specifying a user and password then use the following setting.</em></p>
<pre><code class="language-py"><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'default'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'ENGINE'</span><span class="p">:</span> <span class="s">'django.db.backends.postgresql'</span><span class="p">,</span>
        <span class="s">'NAME'</span><span class="p">:</span> <span class="s">'polls_development'</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>
<p><strong>NOTE:</strong> <em>Without specifying a <code>HOST</code> <code>psycopg2</code> will connect using a Unix socket in the same manner as psql. When you specify a <code>HOST</code>, <code>psycopg2</code> will connect with TCP/IP, which requires a password. (<a href="http://stackoverflow.com/a/23871618/391924">ref</a>)</em></p>
<p>Now, we can migrate the db, create a super user, start the server and view the admin page to see that everything was set up correctly.</p>
<pre><code class="language-bash"><span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span><span class="nb">cd </span>polls
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>python manage.py migrate
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>python manage.py createsuperuser
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>python manage.py runserver
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>xdg-open http://localhost:8000/admin</code></pre>
<h2>Wrap up</h2>
<p>Update your <code>requirements.txt</code> file and commit all your changes to this point.</p>
<pre><code class="language-bash"><span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>pip freeze &gt; requirements.txt
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>git add .
<span class="o">(</span>.env<span class="o">)</span> <span class="nv">$ </span>git commit -m <span class="s2">"Configure a PostgreSQL database"</span></code></pre>
<h2>Resources</h2>
<ul>
<li><a href="http://tutorial.djangogirls.org/en/">Django Girls Tutorial</a></li>
<li>
<a href="https://docs.djangoproject.com/en/1.9/">Django Documentation</a>
<ul>
<li>
<a href="https://docs.djangoproject.com/en/1.9/ref/settings/">Settings</a>
<ul>
<li><a href="https://docs.djangoproject.com/en/1.9/ref/settings/#databases">DATABASES</a></li>
</ul>
</li>
<li>
<a href="https://docs.djangoproject.com/en/1.9/ref/django-admin/">django-admin</a>
<ul>
<li><a href="https://docs.djangoproject.com/en/1.9/ref/django-admin/#django-admin-migrate">migrate</a></li>
<li><a href="https://docs.djangoproject.com/en/1.9/ref/django-admin/#django-admin-createsuperuser">createsuperuser</a></li>
<li><a href="https://docs.djangoproject.com/en/1.9/ref/django-admin/#django-admin-runserver">runserver</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://pip.pypa.io/en/stable/user_guide/#requirements-files">requirements.txt</a></li>
</ul>

    </div>
  </article>
</div>


  <footer class="center">
    <p>
      Copyright &copy; 2016
      <a href="/">Dwayne Crooks</a>.
    </p>
    <ul class="list-reset">
      <li class="inline-block mr1">
        <a href="https://github.com/dwayne" target="_blank" title="Me on GitHub">
          GitHub
        </a>
      </li>
      <li class="inline-block mr1">
        <a href="https://twitter.com/dwaynecrooks" target="_blank" title="Me on Twitter">
          Twitter
        </a>
      </li>
      <li class="inline-block">
        <a href="mailto:me@dwaynecrooks.com" target="_blank" title="How can I help you?">
          Email
        </a>
      </li>
    </ul>
  </footer>
</div>


    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-48307662-1', 'auto');
      ga('send', 'pageview');
    </script>
    
  </body>
</html>
